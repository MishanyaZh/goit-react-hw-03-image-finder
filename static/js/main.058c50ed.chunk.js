(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{13:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__3SYtS",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__2gePp"}},14:function(e,t,a){e.exports={overlay:"Modal_overlay__toDUB",modal:"Modal_modal__Hc5hJ"}},30:function(e,t,a){e.exports={app:"App_app__Olz43"}},31:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__3Of5F"}},32:function(e,t,a){e.exports={button:"Button_button__2isXF"}},41:function(e,t,a){},5:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__2iBHo",searchForm:"Searchbar_searchForm__wiOeh",searchFormButton:"Searchbar_searchFormButton__31LFf",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1dbAh",searchFormInput:"Searchbar_searchFormInput__3Iufe"}},86:function(e,t,a){"use strict";a.r(t);var r,n=a(0),s=a.n(n),c=a(24),i=a.n(c),o=(a(41),a(4)),l=a.n(o),u=a(15),m=a(7),h=a(25),d=a(26),g=a(35),p=a(34),b=a(6),f=a(27),j=a.n(f),v=a(28),x=a(33).a.div(r||(r=Object(v.a)(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),O=a(30),S=a.n(O),_=a(11),y=a.n(_);y.a.defaults.baseURL="https://pixabay.com/api/";var I=function(){var e=Object(m.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("?q=".concat(t,"&page=").concat(a,"&key=").concat("22670626-c734a5ab3fb2edefe4011dc83","&image_type=photo&orientation=horizontal&per_page=12"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n.hits.map((function(e){return{id:e.id,webImg:e.webformatURL,largeImg:e.largeImageURL}})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=a(5),w=a.n(k),F=a(1),G=function(e){var t=e.onSubmit;return Object(F.jsx)("header",{className:w.a.searchbar,children:Object(F.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=e.target.elements.imgValue.value;t(a),e.target.elements.imgValue.value=""},className:w.a.searchForm,children:[Object(F.jsx)("button",{type:"submit",className:w.a.searchFormButton,children:Object(F.jsx)("span",{className:w.a.searchFormButtonLabel,children:"Search"})}),Object(F.jsx)("input",{name:"imgValue",className:w.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},L=a(12),N=a(13),V=a.n(N),B=function(e){var t=e.id,a=e.webImg,r=e.largeImg,n=e.handleSelectImage;return Object(F.jsx)("li",{onClick:function(){n(r)},className:V.a.imageGalleryItem,children:Object(F.jsx)("img",{src:a,alt:t,className:V.a.imageGalleryItemImage})})},C=a(31),M=a.n(C),q=function(e){var t=e.images,a=e.handleSelectImage;return Object(F.jsx)("ul",{className:M.a.imageGallery,children:t.map((function(e){return Object(n.createElement)(B,Object(L.a)(Object(L.a)({handleSelectImage:a},e),{},{key:e.id}))}))})},U=a(32),D=a.n(U),E=function(e){var t=e.onClickLoadMore;return Object(F.jsx)("button",{onClick:function(e){e.preventDefault(),t()},className:D.a.button,type:"button",children:"Load more"})},A=a(14),J=a.n(A),P=function(e){var t=e.image;return Object(F.jsx)("div",{className:J.a.overlay,children:Object(F.jsx)("div",{className:J.a.modal,children:Object(F.jsx)("img",{src:t,alt:t})})})},R=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={imgValue:null,images:[],reqStatus:"idle",page:1,loader:!1,selectImage:null},e.onCloseModal=function(t){"Escape"===t.code&&e.setState({selectImage:null})},e.handleSelectImage=function(t){e.setState({selectImage:t})},e.handleFormSubmit=function(t){e.setState({imgValue:t,page:1,loader:!0})},e.loadMoreClick=function(t){e.setState({page:e.state.page+1,loader:!0})},e}return Object(d.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onCloseModal)}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onCloseModal)}},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.imgValue===this.state.imgValue&&a.page===this.state.page){e.next=24;break}if(this.setState({loader:!0}),""!==this.state.imgValue.trim()){e.next=6;break}return this.setState({reqStatus:"pending"}),b.b.error("Pleas write something"),e.abrupt("return");case 6:return e.prev=6,e.next=9,I(this.state.imgValue,this.state.page);case 9:if(r=e.sent,this.setState({loader:!1}),0!==r.length){e.next=15;break}return this.setState({reqStatus:"rejected",images:[],page:1}),b.b.error("your images not faind."),e.abrupt("return");case 15:a.imgValue!==this.state.imgValue&&this.setState({images:[],page:1}),this.setState((function(e){return{images:[].concat(Object(u.a)(e.images),Object(u.a)(r)),reqStatus:"resolved",loader:!1}})),Object(b.b)("its your, ".concat(this.state.imgValue,"s!"),{icon:"\ud83d\udc4f"}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(6),this.setState({reqStatus:"rejected"}),b.b.error("This didn't work.");case 24:case"end":return e.stop()}}),e,this,[[6,20]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(F.jsxs)("div",{className:S.a.app,children:[Object(F.jsx)(G,{onSubmit:this.handleFormSubmit}),Object(F.jsx)(q,{images:this.state.images,handleSelectImage:this.handleSelectImage}),this.state.selectImage&&Object(F.jsx)(P,{image:this.state.selectImage}),"resolved"===this.state.reqStatus&!this.state.loader&&Object(F.jsx)(E,{onClickLoadMore:this.loadMoreClick}),Object(F.jsx)(b.a,{position:"top-right",reverseOrder:!1}),!1!==this.state.loader&&Object(F.jsx)(x,{children:Object(F.jsx)(j.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})})]})}}]),a}(n.Component);i.a.render(Object(F.jsx)(s.a.StrictMode,{children:Object(F.jsx)(R,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.058c50ed.chunk.js.map